# =============================================================================
# ENVIRONMENT
# =============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO
API_VERSION=1.0.0

# =============================================================================
# APPLICATION
# =============================================================================
APP_NAME=Turkish Legal AI
APP_VERSION=1.0.0
API_V1_PREFIX=/api/v1
API_V2_PREFIX=/api/v2
API_BETA_PREFIX=/api/beta
ALLOWED_HOSTS=localhost,127.0.0.1
CORS_ORIGINS=http://localhost:3000,http://localhost:8000
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# MULTI-TENANT CONFIGURATION
# =============================================================================
MULTI_TENANT_ENABLED=true
TENANT_MODE=rls  # Options: rls (row-level security), schema, shard
TENANT_HEADER=X-Tenant-ID
TENANT_SCHEMA_PREFIX=tenant_
TENANT_DB_SHARDING_ENABLED=false
TENANT_CACHE_NAMESPACE_ENABLED=true

# Tenant Quotas
TENANT_DEFAULT_DAILY_REQUEST_QUOTA=10000
TENANT_DEFAULT_MONTHLY_DOCUMENT_QUOTA=1000
TENANT_DEFAULT_STORAGE_QUOTA_GB=100
TENANT_QUOTA_ENFORCEMENT=soft  # soft or hard

# =============================================================================
# DATABASE - PostgreSQL
# =============================================================================
DATABASE_URL=postgresql+asyncpg://legal_user:secure_password@localhost:5432/turkish_legal_ai
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600
DATABASE_ECHO=false
DATABASE_SSL_MODE=prefer

# Read Replica
DATABASE_READ_URL=postgresql+asyncpg://legal_user:secure_password@localhost:5433/turkish_legal_ai
DATABASE_READ_REPLICA_ENABLED=true
DATABASE_READ_WRITE_SPLIT=true

# Connection Retry
DATABASE_RETRY_ATTEMPTS=3
DATABASE_RETRY_DELAY=2

# =============================================================================
# REDIS - Cache & Queue
# =============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_CACHE_DB=0
REDIS_QUEUE_DB=1
REDIS_SESSION_DB=2
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_RETRY_ON_TIMEOUT=true
REDIS_HEALTH_CHECK_INTERVAL=30

# Redis Cluster (Production)
REDIS_CLUSTER_ENABLED=false
REDIS_CLUSTER_NODES=redis-1:6379,redis-2:6379,redis-3:6379

# =============================================================================
# CELERY - Task Queue
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=3600
CELERY_TASK_SOFT_TIME_LIMIT=3300
CELERY_WORKER_PREFETCH_MULTIPLIER=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000

# =============================================================================
# STORAGE - S3 / MinIO
# =============================================================================
S3_ENDPOINT_URL=http://localhost:9000
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin
S3_BUCKET_NAME=legal-documents
S3_REGION=us-east-1
S3_USE_SSL=false
S3_SIGNATURE_VERSION=s3v4

# Production AWS S3
# S3_ENDPOINT_URL=https://s3.eu-central-1.amazonaws.com
# S3_ACCESS_KEY_ID=your_aws_access_key
# S3_SECRET_ACCESS_KEY=your_aws_secret_key
# S3_USE_SSL=true

# S3 Advanced
S3_MULTIPART_THRESHOLD_MB=100
S3_MULTIPART_CHUNKSIZE_MB=10
S3_MAX_POOL_CONNECTIONS=50

# =============================================================================
# LLM PROVIDERS
# =============================================================================

# OpenAI
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7
OPENAI_TIMEOUT=60

# Azure OpenAI (Enterprise)
AZURE_OPENAI_ENABLED=false
AZURE_OPENAI_API_KEY=...
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4
AZURE_OPENAI_API_VERSION=2024-02-15-preview
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002

# Anthropic (Claude)
ANTHROPIC_API_KEY=sk-ant-...
ANTHROPIC_MODEL=claude-3-opus-20240229
ANTHROPIC_MAX_TOKENS=4096
ANTHROPIC_TIMEOUT=60

# Google (Gemini)
GOOGLE_API_KEY=...
GOOGLE_MODEL=gemini-pro
GOOGLE_EMBEDDING_MODEL=embedding-001
GOOGLE_TIMEOUT=60

# Cohere
COHERE_API_KEY=...
COHERE_MODEL=command-r-plus
COHERE_EMBEDDING_MODEL=embed-multilingual-v3.0
COHERE_TIMEOUT=60

# =============================================================================
# LLM CONFIGURATION
# =============================================================================
LLM_PROVIDER=openai
LLM_FALLBACK_ENABLED=true
LLM_FALLBACK_PROVIDERS=anthropic,google,cohere
LLM_RETRY_ATTEMPTS=3
LLM_RETRY_DELAY=2
LLM_TIMEOUT=60
LLM_CACHE_ENABLED=true
LLM_CACHE_TTL=3600

# Circuit Breaker
LLM_CIRCUIT_BREAKER_ENABLED=true
LLM_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
LLM_CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60
LLM_CIRCUIT_BREAKER_HALF_OPEN_REQUESTS=3

# Cost Control
LLM_MAX_COST_PER_REQUEST_USD=1.0
LLM_COST_TRACKING_ENABLED=true

# =============================================================================
# RAG CONFIGURATION
# =============================================================================
RAG_CHUNK_SIZE=1000
RAG_CHUNK_OVERLAP=200
RAG_TOP_K=5
RAG_SIMILARITY_THRESHOLD=0.7
RAG_RERANK_ENABLED=true
RAG_RERANK_TOP_K=20
RAG_HYBRID_SEARCH=true
RAG_HYBRID_ALPHA=0.5  # 0=keyword, 1=semantic

# Vector Search
VECTOR_DIMENSION=1536
VECTOR_INDEX_TYPE=ivfflat
VECTOR_LISTS=100
VECTOR_PROBES=10

# =============================================================================
# DOCUMENT PROCESSING
# =============================================================================
MAX_DOCUMENT_SIZE_MB=100
MAX_PAGES_PER_DOCUMENT=500
MAX_DOCUMENTS_PER_BATCH=50
ALLOWED_DOCUMENT_TYPES=pdf,docx,doc,txt,rtf

# OCR
OCR_ENABLED=true
OCR_LANGUAGE=tur+eng
OCR_ENGINE=tesseract  # tesseract or easyocr
OCR_TIMEOUT_SECONDS=300
OCR_DPI=300

# Document Processing Timeouts
DOCUMENT_PARSE_TIMEOUT=300
DOCUMENT_EMBEDDING_TIMEOUT=600

# =============================================================================
# TURKISH NLP
# =============================================================================
TURKISH_NER_MODEL=dbmdz/bert-base-turkish-cased
TURKISH_SENTIMENT_MODEL=savasy/bert-base-turkish-sentiment-cased
SPACY_TURKISH_MODEL=tr_core_news_lg
STANZA_TURKISH_MODEL=tr
NLP_MODEL_CACHE_DIR=/tmp/nlp_models
NLP_DOWNLOAD_ON_STARTUP=false

# =============================================================================
# SECURITY - SECRETS MANAGEMENT
# =============================================================================

# KMS (Key Management Service)
KMS_PROVIDER=local  # local, aws, gcp, azure, vault
KMS_ENABLED=false

# AWS KMS
AWS_KMS_KEY_ID=arn:aws:kms:eu-central-1:123456789:key/...
AWS_KMS_REGION=eu-central-1

# Azure Key Vault
AZURE_KEYVAULT_URL=https://your-vault.vault.azure.net
AZURE_KEYVAULT_TENANT_ID=...
AZURE_KEYVAULT_CLIENT_ID=...
AZURE_KEYVAULT_CLIENT_SECRET=...

# HashiCorp Vault
VAULT_ADDR=http://localhost:8200
VAULT_TOKEN=...
VAULT_NAMESPACE=legal-ai
VAULT_MOUNT_PATH=secret

# Local Encryption (Development only)
ENCRYPTION_KEY=your-32-byte-encryption-key-base64-encoded
MASTER_KEY=your-master-encryption-key-change-in-production

# =============================================================================
# SECURITY - JWT & AUTH
# =============================================================================
JWT_SECRET_KEY=your-super-secret-jwt-key-minimum-32-characters-long
JWT_ALGORITHM=RS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ISSUER=https://yourdomain.com
JWT_AUDIENCE=turkish-legal-ai

# OAuth2
OAUTH2_ENABLED=false
OAUTH2_GOOGLE_CLIENT_ID=...
OAUTH2_GOOGLE_CLIENT_SECRET=...
OAUTH2_MICROSOFT_CLIENT_ID=...
OAUTH2_MICROSOFT_CLIENT_SECRET=...

# SAML (Enterprise SSO)
SAML_ENABLED=false
SAML_IDP_METADATA_URL=https://idp.example.com/metadata
SAML_SP_ENTITY_ID=https://yourdomain.com/saml

# =============================================================================
# SECURITY - PASSWORD POLICY
# =============================================================================
PASSWORD_MIN_LENGTH=12
PASSWORD_MAX_LENGTH=128
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGIT=true
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_HISTORY_COUNT=5
PASSWORD_EXPIRY_DAYS=90

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STRATEGY=sliding_window  # fixed_window, sliding_window, token_bucket
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000

# Per-Tenant Rate Limiting
RATE_LIMIT_TENANT_ENABLED=true
RATE_LIMIT_TENANT_QUOTA_DAILY=100000
RATE_LIMIT_ADMIN_EXEMPT=true

# =============================================================================
# KVKK / GDPR COMPLIANCE
# =============================================================================
KVKK_COMPLIANCE_ENABLED=true
GDPR_COMPLIANCE_ENABLED=true

# Data Retention
DATA_RETENTION_DAYS=365
DATA_RETENTION_POLICY=auto_delete  # auto_delete, archive, manual
AUTO_DELETE_ENABLED=true
AUTO_DELETE_SCHEDULE="0 3 * * *"  # Daily at 3 AM

# Audit Logs
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years (KVKK requirement)
AUDIT_LOG_IMMUTABLE=true
AUDIT_LOG_DIGITAL_SIGNATURE=true

# PII Protection
PII_DETECTION_ENABLED=true
PII_ANONYMIZATION_ENABLED=true
PII_MASKING_STRATEGY=redact  # redact, hash, tokenize
PII_TYPES=TC_NO,IBAN,PHONE,EMAIL,ADDRESS

# Right to be Forgotten (GDPR Article 17)
RIGHT_TO_ERASURE_ENABLED=true
ERASURE_VERIFICATION_REQUIRED=true

# Data Protection Officer (DPO)
DPO_EMAIL=dpo@yourdomain.com
DPO_PHONE=+90-xxx-xxx-xxxx
PRIVACY_POLICY_URL=https://yourdomain.com/privacy

# =============================================================================
# BACKUP & DISASTER RECOVERY
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_ENABLED=true
BACKUP_STORAGE=s3  # s3, local, gcs, azure

# Backup Targets
BACKUP_DATABASE=true
BACKUP_REDIS=true
BACKUP_MINIO=true
BACKUP_LOGS=true

# DR Targets
DR_RPO_SECONDS=3600  # Recovery Point Objective: 1 hour
DR_RTO_SECONDS=1800  # Recovery Time Objective: 30 minutes
DR_SITE_ENABLED=false
DR_SITE_URL=https://dr.yourdomain.com

# =============================================================================
# OBSERVABILITY - MONITORING
# =============================================================================

# Sentry
SENTRY_DSN=https://...@sentry.io/...
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=1.0
SENTRY_PROFILES_SAMPLE_RATE=1.0

# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=turkish-legal-ai
OTEL_TRACES_ENABLED=true
OTEL_METRICS_ENABLED=true
OTEL_LOGS_ENABLED=true
OTEL_TRACE_SAMPLE_RATE=1.0

# =============================================================================
# OBSERVABILITY - LOGGING
# =============================================================================
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/var/log/legal-ai/app.log
LOG_FILE_MAX_BYTES=10485760  # 10 MB
LOG_FILE_BACKUP_COUNT=10
LOG_STRUCTURED=true
LOG_INCLUDE_CONTEXT=true

# =============================================================================
# HEALTH CHECKS
# =============================================================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TOKEN=secure-health-check-token
HEALTH_CHECK_INCLUDE_DEPENDENCIES=true
HEALTH_CHECK_TIMEOUT=5

# Liveness & Readiness
LIVENESS_PROBE_PATH=/health/live
READINESS_PROBE_PATH=/health/ready
STARTUP_PROBE_PATH=/health/startup

# =============================================================================
# EMAIL NOTIFICATIONS
# =============================================================================
SMTP_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@yourdomain.com
SMTP_FROM_NAME=Turkish Legal AI
SMTP_USE_TLS=true
SMTP_TIMEOUT=10

# =============================================================================
# WEBSOCKET
# =============================================================================
WEBSOCKET_ENABLED=true
WEBSOCKET_MAX_CONNECTIONS=1000
WEBSOCKET_MAX_MESSAGE_SIZE_KB=1024
WEBSOCKET_PING_INTERVAL=30
WEBSOCKET_PING_TIMEOUT=10
WEBSOCKET_COMPRESSION_ENABLED=true

# =============================================================================
# TURKISH LEGAL SOURCES
# =============================================================================
RESMI_GAZETE_URL=https://www.resmigazete.gov.tr
RESMI_GAZETE_SCRAPING_ENABLED=true
RESMI_GAZETE_RATE_LIMIT=10

MEVZUAT_GOV_URL=https://www.mevzuat.gov.tr
MEVZUAT_SCRAPING_ENABLED=true

YARGITAY_URL=https://karararama.yargitay.gov.tr
YARGITAY_SCRAPING_ENABLED=true

DANISTAY_URL=https://karararama.danistay.gov.tr
DANISTAY_SCRAPING_ENABLED=true

KVKK_URL=https://www.kvkk.gov.tr
KVKK_SCRAPING_ENABLED=true

# Scraping Configuration
SCRAPING_USER_AGENT_ROTATION=true
SCRAPING_PROXY_ENABLED=false
SCRAPING_RETRY_ATTEMPTS=3
SCRAPING_TIMEOUT=30

# =============================================================================
# ELASTICSEARCH (Optional)
# =============================================================================
ELASTICSEARCH_ENABLED=false
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=changeme
ELASTICSEARCH_INDEX_PREFIX=legal_
ELASTICSEARCH_REPLICAS=1
ELASTICSEARCH_SHARDS=3

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_RAG=true
ENABLE_CHAT=true
ENABLE_DOCUMENT_ANALYSIS=true
ENABLE_CONTRACT_GENERATION=true
ENABLE_LEGAL_QA=true
ENABLE_TURKISH_PARSER=true
ENABLE_MULTI_LANGUAGE=false
ENABLE_VOICE_INTERFACE=false

# =============================================================================
# PERFORMANCE & SCALING
# =============================================================================
WORKERS=4
WORKER_CLASS=uvicorn.workers.UvicornWorker
WORKER_CONNECTIONS=1000
WORKER_MAX_REQUESTS=10000
WORKER_MAX_REQUESTS_JITTER=1000
KEEPALIVE=5
TIMEOUT=30
GRACEFUL_TIMEOUT=30

# Connection Pooling
MAX_CONCURRENT_REQUESTS=1000
REQUEST_QUEUE_SIZE=10000

# =============================================================================
# DEVELOPMENT
# =============================================================================
RELOAD=true
ACCESS_LOG=true
DEV_MODE=true
DEBUG_TOOLBAR=false
PROFILER_ENABLED=false

# =============================================================================
# TESTING
# =============================================================================
TEST_DATABASE_URL=postgresql+asyncpg://test:test@localhost:5432/test_db
TEST_REDIS_URL=redis://localhost:6379/15